{"profiles":[{"entity":"order","enabled":"1","name":"Order Export (XML)Defined Fields","destination_ids":"","last_execution":"2015-09-01 09:36:53","last_modification":"2015-09-01 09:36:25","conditions_serialized":"a:6:{s:4:\"type\";s:43:\"xtento_orderexport\/export_condition_combine\";s:9:\"attribute\";N;s:8:\"operator\";N;s:5:\"value\";s:1:\"1\";s:18:\"is_value_processed\";N;s:10:\"aggregator\";s:3:\"all\";}","store_ids":"","export_fields":"","customer_groups":"","export_one_file_per_object":"0","export_filter_product_type":"","export_filter_new_only":"1","export_filter_datefrom":null,"export_filter_older_x_minutes":null,"export_filter_last_x_days":null,"export_filter_dateto":null,"export_filter_status":"pending,processing","export_action_change_status":"processing","export_action_add_comment":null,"export_action_cancel_order":"0","export_action_invoice_order":"0","export_action_invoice_notify":"0","export_action_ship_order":"0","export_action_ship_notify":"0","save_files_manual_export":"1","export_empty_files":"0","manual_export_enabled":"1","start_download_manual_export":"1","save_files_local_copy":"1","event_observers":"","cronjob_enabled":"0","cronjob_frequency":"","cronjob_custom_frequency":"","output_type":"xsl","filename":"order-export.xml","encoding":"utf-8","xsl_template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<files>\r\n<file filename=\"Export_%lastincrementid%.xml\">\r\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http:\/\/www.w3.org\/1999\/XSL\/Transform\" xmlns:php=\"http:\/\/php.net\/xsl\" exclude-result-prefixes=\"php\">\r\n<xsl:output method=\"xml\" indent=\"yes\"\/>\r\n<xsl:template match=\"\/\">\r\n<orders>\r\n<xsl:for-each select=\"orders\/order\">\r\n      <order>\r\n            <orderId><xsl:value-of select=\"increment_id\"\/><\/orderId>\r\n            <orderTypeId>SALES_ORDER<\/orderTypeId>\r\n            <orderName><xsl:value-of select=\"customer_firstname\"\/><\/orderName>\r\n            <salesChannelEnumId>Web Channel<\/salesChannelEnumId>\r\n            <affiliateCode><\/affiliateCode>\r\n            <orderDate><xsl:value-of select=\"php:functionString('strftime', '%d\/%m\/%Y %H:%M', created_at_timestamp)\"\/><\/orderDate>\r\n            <priority><\/priority>\r\n            <currencyUom><xsl:value-of select=\"base_currency_code\"\/><\/currencyUom>\r\n            <productStoreId><xsl:value-of select=\"store_id\" \/><\/productStoreId>\r\n            <statusId>created<\/statusId>\r\n            <customerPartyId><xsl:value-of select=\"customer_id\" \/><\/customerPartyId>\r\n            <supplierPartyId>Stockroom<\/supplierPartyId>\r\n            <xsl:choose>\r\n                <xsl:when test=\"gift_message_id != '' \">\r\n                    <giftOrder>1<\/giftOrder>\r\n                    <giftMessage><xsl:value-of select=\"gift_message\" \/><\/giftMessage>\r\n                <\/xsl:when>\r\n                <xsl:otherwise>\r\n                     <giftOrder>0<\/giftOrder>\r\n                     <giftMessage><\/giftMessage>\r\n                <\/xsl:otherwise>\r\n            <\/xsl:choose>\r\n            <items>\r\n            <xsl:for-each select=\"items\/item\">\r\n                <item>\r\n                    <productId><xsl:value-of select=\"sku\"\/><\/productId>\r\n                    <quantity><xsl:value-of select=\"qty\"\/><\/quantity>\r\n                    <unitprice><xsl:value-of select=\"price\"\/><\/unitprice>\r\n                 <\/item>\r\n            <\/xsl:for-each>\r\n            <\/items>\r\n            <orderTax><xsl:value-of select=\"tax_amount\"\/><\/orderTax>\r\n            <orderAdjustmentTotal><xsl:value-of select=\"discount_amount\"\/><\/orderAdjustmentTotal>\r\n            <shippingTotal><xsl:value-of select=\"shipping_amount\"\/><\/shippingTotal>\r\n            <promoCode><xsl:value-of select=\"coupon_code\"\/><\/promoCode>\r\n            <grandTotal><xsl:value-of select=\"grand_total\"\/><\/grandTotal>\r\n            <amountPaid><xsl:value-of select=\"payment\/amount_paid\"\/><\/amountPaid>\r\n    \t\t<paymentStatusId>PAID<\/paymentStatusId>\r\n            <paymentMethodTypeId>CREDIT_CARD<\/paymentMethodTypeId>\r\n\t\t\t<effectiveDateOfPayment><xsl:value-of select=\"php:functionString('strftime', '%d\/%m\/%Y %H:%M', created_at_timestamp)\"\/><\/effectiveDateOfPayment>\r\n            <currencyUomId><xsl:value-of select=\"base_currency_code\"\/><\/currencyUomId>\r\n            <xsl:if test=\"shipping_method='premiumrate_Standard_Delivery'\" >\r\n            <xsl:variable name=\"sdsm\" >\r\n                <xsl:for-each select=\"items\/item\">\r\n                        <xsl:if test=\"weight = 0 and not(preceding::item[weight\/text() = current()\/weight\/text()])\" >\r\n                            XYZ                            \r\n                        <\/xsl:if>                         \r\n                <\/xsl:for-each> \r\n                <\/xsl:variable>\r\n                <xsl:choose>\r\n                <xsl:when test=\"$sdsm != '' \">\r\n                    <ShippingMethod><xsl:value-of select=\"$sdsm\"\/><\/ShippingMethod>\r\n                <\/xsl:when>\r\n                <xsl:otherwise>\r\n                <xsl:choose>\r\n                    <xsl:when test=\"subtotal > 250\">\r\n                        <ShippingMethod>FRG<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                     <xsl:when test=\"weight&lt;0.5\">\r\n                        <ShippingMethod>FC<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                    <xsl:when test=\"weight &lt; 8.75\">\r\n                        <ShippingMethod>BW<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                    <xsl:otherwise>\r\n                        <ShippingMethod>FRG<\/ShippingMethod>\r\n                    <\/xsl:otherwise>\r\n                <\/xsl:choose>\r\n                <\/xsl:otherwise>\r\n                <\/xsl:choose>\r\n                             \r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Three-Day_Shipping'\" >\r\n                <ShippingMethod>FR3<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Two-Day_Shipping'\" >\r\n                <ShippingMethod>FR2<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Overnight'\" >\r\n                <ShippingMethod>FRS<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Saturday_Overnight'\" >\r\n                <ShippingMethod>SAT<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Standard_Canada_Post'\" >\r\n                <ShippingMethod>FCI<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Canada_Express'\" >\r\n                <ShippingMethod>EMS<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Standard_Global_Post_(Non-Insured)'\" >\r\n                <ShippingMethod>FCI<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Global_Express_w\/_Tracking_Info_(Recommended)'\" >\r\n                <ShippingMethod>EMS<\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='premiumrate_Free_Shipping'\" >\r\n            <xsl:variable name=\"fssm\" >\r\n                <xsl:for-each select=\"items\/item\">\r\n                    <xsl:if test=\"weight = 0 and not(preceding::item[weight\/text() = current()\/weight\/text()])\" >\r\n                        XYZ\r\n                    <\/xsl:if>\r\n                <\/xsl:for-each>\r\n                <\/xsl:variable>\r\n                <xsl:choose>\r\n                <xsl:when test=\"$fssm != '' \">\r\n                    <ShippingMethod><xsl:value-of select=\"$fssm\"\/><\/ShippingMethod>\r\n                <\/xsl:when>\r\n                <xsl:otherwise>\r\n                <xsl:choose>\r\n                    <xsl:when test=\"subtotal > 250\">\r\n                        <ShippingMethod>FRG<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                    <xsl:when test=\"weight &lt; 0.5\">\r\n                        <ShippingMethod>FC<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                    <xsl:when test=\"weight &lt; 8.75\">\r\n                        <ShippingMethod>SMA<\/ShippingMethod>\r\n                    <\/xsl:when>\r\n                    <xsl:otherwise>\r\n                        <ShippingMethod>FRG<\/ShippingMethod>\r\n                    <\/xsl:otherwise>\r\n                <\/xsl:choose>\r\n                <\/xsl:otherwise>\r\n                <\/xsl:choose>\r\n            <\/xsl:if>\r\n            <xsl:if test=\"shipping_method='freeshipping_freeshipping'\" >\r\n                <ShippingMethod><\/ShippingMethod>\r\n            <\/xsl:if>\r\n            <ShippingFirstName><xsl:value-of select=\"shipping\/firstname\"\/><\/ShippingFirstName>\r\n            <ShippingLastName><xsl:value-of select=\"shipping\/lastname\"\/><\/ShippingLastName>\r\n            <ShippingCountry><xsl:value-of select=\"shipping\/country_iso3\"\/><\/ShippingCountry>\r\n            <ShippingStreet><xsl:value-of select=\"shipping\/street1\"\/><\/ShippingStreet>\r\n            <ShippingCity><xsl:value-of select=\"shipping\/city\"\/><\/ShippingCity>\r\n            <ShippingPostcode><xsl:value-of select=\"shipping\/postcode\"\/><\/ShippingPostcode>\r\n            <ShippingRegion><xsl:value-of select=\"shipping\/region_code\"\/><\/ShippingRegion>\r\n\t\t\t<ShippingNotes><\/ShippingNotes>\r\n            <BillingFirstName><xsl:value-of select=\"billing\/firstname\"\/><\/BillingFirstName>\r\n            <BillingLastName><xsl:value-of select=\"billing\/lastname\"\/><\/BillingLastName>\r\n            <BillingCountry><xsl:value-of select=\"billing\/country_iso3\"\/><\/BillingCountry>\r\n            <BillingStreet><xsl:value-of select=\"billing\/street1\"\/><\/BillingStreet>\r\n            <BillingCity><xsl:value-of select=\"billing\/city\"\/><\/BillingCity>\r\n            <BillingPostcode><xsl:value-of select=\"billing\/postcode\"\/><\/BillingPostcode>\r\n            <BillingRegion><xsl:value-of select=\"billing\/region_code\"\/><\/BillingRegion>\r\n\t\t\t<primaryPhoneCountryCode><\/primaryPhoneCountryCode>\r\n\t\t\t<primaryPhoneAreaCode><\/primaryPhoneAreaCode>\r\n            <xsl:variable name=\"number1\" select=\"php:functionString('str_replace',' ','',billing\/telephone)\" \/>\r\n            <xsl:variable name=\"number2\" select=\"php:functionString('str_replace',' ','',$number1)\" \/>\r\n            <xsl:variable name=\"number3\" select=\"php:functionString('str_replace','-','',$number2)\" \/>\r\n            <xsl:variable name=\"number4\" select=\"php:functionString('str_replace','.','',$number3)\" \/>\r\n            <xsl:variable name=\"number5\" select=\"php:functionString('str_replace','(','',$number4)\" \/>\r\n            <xsl:variable name=\"number6\" select=\"php:functionString('str_replace',')','',$number5)\" \/>\r\n            <xsl:variable name=\"number7\" select=\"php:functionString('str_replace','+','',$number6)\" \/>\r\n            <xsl:variable name=\"number8\" >\r\n               <xsl:choose>\r\n                    <xsl:when test=\"starts-with($number7, '1')\" >\r\n                            <xsl:value-of select=\"php:functionString('substr',$number7,'1')\"\/>\r\n                    <\/xsl:when>\r\n                    <xsl:otherwise>\r\n    \t\t\t\t\t<xsl:value-of select=\"$number7\" \/>\r\n\t\t\t\t\t<\/xsl:otherwise>\r\n               <\/xsl:choose>\r\n            <\/xsl:variable> \r\n            <xsl:variable name=\"number10\" select=\"php:functionString('substr_replace',$number8,'(','0', 0)\" \/>\r\n            <xsl:variable name=\"number11\" select=\"php:functionString('substr_replace',$number10,')','4', 0)\" \/>\r\n            <xsl:variable name=\"number12\" select=\"php:functionString('substr_replace',$number11,' ','5', 0)\" \/>\r\n            <xsl:variable name=\"number13\" select=\"php:functionString('substr_replace',$number12,'-','9', 0)\" \/>            \r\n                <xsl:choose>\r\n                    <xsl:when test=\"string-length($number8) &lt; 10\" >\r\n                        <primaryPhoneNumber><xsl:value-of select=\"$number8\"\/><\/primaryPhoneNumber>\r\n                    <\/xsl:when>\r\n                    <xsl:when test=\"string-length($number8) &gt; 10\" >\r\n                        <primaryPhoneNumber><xsl:value-of select=\"$number8\"\/><\/primaryPhoneNumber>\r\n                    <\/xsl:when>\r\n                    <xsl:otherwise>\r\n                        <primaryPhoneNumber><xsl:value-of select=\"$number13\"\/><\/primaryPhoneNumber>\r\n                    <\/xsl:otherwise>\r\n                <\/xsl:choose>\r\n\t\t\t<primaryPhoneExtension><\/primaryPhoneExtension>\r\n            <email><xsl:value-of select=\"customer_email\"\/><\/email>\r\n      <\/order>\r\n<\/xsl:for-each>\r\n<\/orders>\r\n<\/xsl:template>\r\n<\/xsl:stylesheet>\r\n<\/file>\r\n<\/files>","test_id":"100000024","new_destination_ids":""}],"destinations":[]}